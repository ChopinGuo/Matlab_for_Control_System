%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ex9_7: Simplify the connection in series
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

n1 = [0.0128 1];
d1 = [0.04 0];
sys1 = tf(n1, d1);

n2 = [30];
d2 = [0.00167 1];
sys2 = tf(n2, d2);

n3 = [2.5];
d3 = [0.0128, 1];
sys3 = tf(n3, d3);

s1 = ss(sys1);
s2 = ss(sys2);
s3 = ss(sys3);

sys123 = sys1 * sys2 * sys3;
sys = s1 * s2 * s3;
s123 = ss(sys123);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ex9_8: Simplify the connection in parallel.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

num1 = [5];
den1 = [1 1];
sys1 = tf(num1, den1);

num2 = [7 8];
den2 = [1 2 9];
sys2 = tf(num2, den2);

s1 = ss(sys1);
s2 = ss(sys2);

sys12 = sys1 + sys2;
sys = s1 + s2;
s12 = ss(sys12);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Ex9_9: Streamlining of feedback connections.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

n1 = [0.049 1];
d1 = [0.088 0];
sys1 = tf(n1, d1);

n2 = [44];
d2 = [0.00167 1];
sys2 = tf(n2, d2);

n3 = [1];
d3 = [0.017 1];
sys3 = tf(n3, d3);

n4 = [1];
d4 = [0.075 0];
sys4 = tf(n4, d4);

n5 = [1];
d5 = [0.1925];
sys5 = tf(n5, d5);

H = 0.01178;

sys34 = feedback(sys3*sys4, 1, -1)

G = sys1 * sys2 * sys34 * sys5;

SYS = feedback(G, H, -1)

